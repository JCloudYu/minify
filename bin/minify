#!/usr/bin/env node

/* minify binary
 * usage: node minify <input-file> <output-file>
 */
(function() {
    'use strict';
    
    var minify      = require('../minify'),
        Util        = require('util.io'),
        
        Pack        = require('../package.json'),
        Version     = Pack.version,
        
        log         = console.log.bind(console),
        
        Argv        = process.argv,
        files       = Util.slice(Argv, 2),
        In          = files[0];
    
    if (!In || Util.strCmp(In, ['-h', '--help']))
        log('minify <input-file1> <input-file2> <inputfileN>\n');
    else if (Util.strCmp(In, ['-v', '--version']) )
        log('v' + Version);
    else if (In)
        files.forEach(function(current) {
            minify.optimize(current, {
                notLog  : true,
                callback: function(error, data) {
                    log(error || data);
                }
            });
        });
})();
